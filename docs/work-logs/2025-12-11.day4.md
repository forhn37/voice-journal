# 2025-12-11 Day 4 작업 로그

## 작업 목표: 로그인/회원가입 화면 개선

### 현재 문제점
1. 회원가입 시 비밀번호 확인 필드 없음
2. 비밀번호 유효성 검사 없음 (placeholder만 "6자 이상")
3. 이메일 형식 검증 없음
4. 로그인/회원가입 UI 구분이 약함 (토글만으로 전환)
5. 비밀번호 보기/숨기기 없음
6. 로딩 스피너가 이모지 (비전문적)
7. Google 로그인 미설정 상태에서 버튼 노출

### 개선 계획

#### 1. 비밀번호 확인 필드 추가 (회원가입 시)
- `passwordConfirm` 상태 추가
- 비밀번호 불일치 시 에러 표시

#### 2. 비밀번호 유효성 검사
- 최소 6자 이상
- 영문 + 숫자 조합 필수
- 실시간 검증 피드백

#### 3. 이메일 형식 검증
- 정규식으로 이메일 형식 체크
- 제출 전 클라이언트 검증

#### 4. UI 개선
- 로그인/회원가입 탭 UI로 변경
- 회원가입 시 추가 필드 표시 (비밀번호 확인)
- 각 모드별 명확한 구분

#### 5. 비밀번호 보기/숨기기
- 눈 아이콘 토글
- `type="password"` ↔ `type="text"` 전환

#### 6. 로딩 스피너 개선
- CSS 애니메이션 스피너로 교체

#### 7. Google 로그인 처리
- "준비 중" 표시로 비활성화

### 수정 파일
- `src/routes/login/+page.svelte` - 전면 개편
- `src/lib/components/AlertModal.svelte` - 신규 생성

---

## 작업 진행 상황

- [x] 비밀번호 확인 필드 추가
- [x] 비밀번호 유효성 검사
- [x] 이메일 형식 검증
- [x] 탭 UI로 변경
- [x] 비밀번호 보기/숨기기
- [x] 로딩 스피너 개선
- [x] Google 로그인 숨김
- [x] 탭 전환 시 레이아웃 점프 수정 (CSS Grid 애니메이션)
- [x] 탭 전환 시 폼 초기화 (보안/UX)
- [x] 회원가입 성공 시 alert → AlertModal로 교체

---

## 구현 상세

### 1. 탭 UI
- 로그인/회원가입 탭으로 명확하게 구분
- 탭 전환 시 에러 및 입력값 초기화
- 활성 탭: 흰 배경 + primary 색상 + 그림자

### 2. 비밀번호 확인 필드
- 회원가입 시에만 표시 (`{#if isSignUp}`)
- 비밀번호 불일치 실시간 검증

### 3. 유효성 검사
- **이메일**: `/^[^\s@]+@[^\s@]+\.[^\s@]+$/` 정규식
- **비밀번호**:
  - 6자 이상
  - 영문자 포함 필수
  - 숫자 포함 필수
- 실시간 검증 (blur 이벤트)
- 제출 전 전체 검증 (`validateForm()`)

### 4. 비밀번호 보기/숨기기
- 눈 아이콘 (열린 눈 / 닫힌 눈) SVG
- 비밀번호, 비밀번호 확인 필드 각각 독립적 토글
- `tabindex={-1}`로 Tab 키 네비게이션에서 제외

### 5. 로딩 스피너
```html
<div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
```

### 6. Google 로그인
- 회색 처리 + disabled 상태
- "Google 로그인 (준비 중)" 텍스트
- 클릭 시 alert 표시

### 7. UX 개선
- 에러 메시지 한글화 및 친근하게 ("~에요" 어미)
- 회원가입 시 이용약관 안내 추가
- 로그인 시 비밀번호 찾기 링크 추가 (기능 미구현)

### 8. 탭 전환 레이아웃 점프 수정
- CSS Grid `grid-template-rows: 0fr → 1fr` 트릭 사용
- 비밀번호 확인 필드가 부드럽게 확장/축소
- `overflow-hidden` + `transition-all duration-300` 조합

### 9. 탭 전환 시 폼 초기화
- `switchMode()` 함수에서 모든 상태 초기화
- email, password, passwordConfirm, 에러 상태, 비밀번호 표시 상태
- 보안 및 UX 측면에서 바람직한 패턴

### 10. AlertModal 컴포넌트
- 단일 확인 버튼만 있는 알림 모달
- `src/lib/components/AlertModal.svelte` 생성
- Props: show, title, message, confirmText, icon, onConfirm
- 회원가입 성공 시 이메일 확인 안내에 사용
- 확인 버튼 클릭 시 로그인 탭으로 자동 전환

---

## 에러 메시지 매핑

| Supabase 에러 | 사용자 메시지 |
|--------------|-------------|
| Invalid login credentials | 이메일 또는 비밀번호가 올바르지 않아요 |
| User already registered | 이미 가입된 이메일이에요 |
| Email not confirmed | 이메일 인증이 필요해요. 메일함을 확인해주세요. |

---

## 테스트 체크리스트

- [ ] 로그인 탭 → 회원가입 탭 전환
- [ ] 이메일 형식 검증 (blur 시)
- [ ] 비밀번호 유효성 검증 (회원가입 시)
- [ ] 비밀번호 확인 불일치 검증
- [ ] 비밀번호 보기/숨기기 토글
- [ ] 로딩 스피너 동작
- [ ] 에러 메시지 표시
- [ ] 실제 로그인 테스트
- [ ] 실제 회원가입 테스트

---

## 빌드 상태

- `npm run check`: 에러 0, 경고 6개 (Svelte 5 패턴 관련)
- 타입 에러 없음
